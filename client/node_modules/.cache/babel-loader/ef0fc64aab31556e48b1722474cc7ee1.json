{"ast":null,"code":"import _objectSpread from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import{ErrShow}from\"../notification/Notification\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={productItem:[],err:\"\",success:\"\"};var UserProduct=function UserProduct(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var productItem=product.productItem,err=product.err;var id=user._id;useEffect(function(){var userData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/user/profile\",{headers:{\"auth-token\":localStorage.account}});case 3:res=_context.sent;setUser(res.data.user);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",_context.t0.response.data.msg);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function userData(){return _ref.apply(this,arguments);};}();userData();},[localStorage.account]);useEffect(function(){var userProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!id){_context2.next=10;break;}_context2.next=4;return axios.post(\"/user/product\",{id:id});case 4:res=_context2.sent;if(res){_context2.next=7;break;}return _context2.abrupt(\"return\",setProduct(_objectSpread(_objectSpread({},productItem),{},{err:\"Product of user does not already.\",success:\"\"})));case 7:if(!(res.data.productInPage.length===0)){_context2.next=9;break;}return _context2.abrupt(\"return\",setProduct({productItem:null,err:\"\",success:\"\"}));case 9:setProduct({productItem:res.data.productInPage,err:\"\",success:\"\"});case 10:_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);_context2.t0.response.data.msg&&setProduct(_objectSpread(_objectSpread({},productItem),{},{err:_context2.t0.response.data.msg,success:\"\"}));case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,12]]);}));return function userProduct(){return _ref2.apply(this,arguments);};}();userProduct();},[id]);var handleDeleteProduct=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e,idProduct,cloudinary_id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();_context3.prev=1;_context3.next=4;return axios.post(\"/user/delete\",{idUser:id,idProduct:idProduct,cloudinary_id:cloudinary_id});case 4:window.location.href=\"/user/product\";_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](1);_context3.t0.response.data.msg&&setProduct(_objectSpread(_objectSpread({},product),{},{err:_context3.t0.response.data.msg,success:\"\"}));case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[1,7]]);}));return function handleDeleteProduct(_x,_x2,_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"box-user-product\",children:[err&&ErrShow(err),!productItem&&/*#__PURE__*/_jsxs(\"div\",{className:\"not-product\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"You not yet upload product \"}),/*#__PURE__*/_jsx(Link,{to:\"/user\",children:\"Th\\xEAm s\\u1EA3n ph\\u1EA9m ngay!\"})]}),productItem&&productItem.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"product-user-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:item.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"box-btn\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit\",children:/*#__PURE__*/_jsx(Link,{to:\"product/\".concat(item._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleDeleteProduct(e,item._id,item.cloudinary);},className:\"delete\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"})})]})]},item._id);})]});};export default UserProduct;","map":{"version":3,"sources":["E:/MERN stack project/fullStack/client/src/auth/form/UserProduct.js"],"names":["React","useEffect","useState","axios","Link","ErrShow","initialState","productItem","err","success","UserProduct","product","setProduct","user","setUser","id","_id","userData","get","headers","localStorage","account","res","data","response","msg","userProduct","post","productInPage","length","handleDeleteProduct","e","idProduct","cloudinary_id","preventDefault","idUser","window","location","href","map","item","image","name","cloudinary"],"mappings":"gnBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,OAAT,KAAwB,8BAAxB,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,WAAW,CAAE,EADM,CAEnBC,GAAG,CAAE,EAFc,CAGnBC,OAAO,CAAE,EAHU,CAArB,CAMA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,cAA8BR,QAAQ,CAACI,YAAD,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eACA,eAAwBV,QAAQ,CAAC,EAAD,CAAhC,yCAAOW,IAAP,eAAaC,OAAb,eAEA,GAAQP,CAAAA,WAAR,CAA6BI,OAA7B,CAAQJ,WAAR,CAAqBC,GAArB,CAA6BG,OAA7B,CAAqBH,GAArB,CAEA,GAAMO,CAAAA,EAAE,CAAGF,IAAI,CAACG,GAAhB,CAEAf,SAAS,CAAC,UAAM,CACd,GAAMgB,CAAAA,QAAQ,0FAAG,iLAEKd,CAAAA,KAAK,CAACe,GAAN,CAAU,eAAV,CAA2B,CAC3CC,OAAO,CAAE,CAAE,aAAcC,YAAY,CAACC,OAA7B,CADkC,CAA3B,CAFL,QAEPC,GAFO,eAKbR,OAAO,CAACQ,GAAG,CAACC,IAAJ,CAASV,IAAV,CAAP,CALa,+GAON,YAAIW,QAAJ,CAAaD,IAAb,CAAkBE,GAPZ,sEAAH,kBAARR,CAAAA,QAAQ,0CAAd,CAUAA,QAAQ,GACT,CAZQ,CAYN,CAACG,YAAY,CAACC,OAAd,CAZM,CAAT,CAcApB,SAAS,CAAC,UAAM,CACd,GAAMyB,CAAAA,WAAW,2FAAG,qKAEZX,EAFY,kDAGIZ,CAAAA,KAAK,CAACwB,IAAN,CAAW,eAAX,CAA4B,CAAEZ,EAAE,CAAFA,EAAF,CAA5B,CAHJ,QAGRO,GAHQ,mBAKTA,GALS,2DAMLV,UAAU,gCACZL,WADY,MAEfC,GAAG,CAAE,mCAFU,CAGfC,OAAO,CAAE,EAHM,GANL,cAYVa,GAAG,CAACC,IAAJ,CAASK,aAAT,CAAuBC,MAAvB,GAAkC,CAZxB,4DAaLjB,UAAU,CAAC,CAChBL,WAAW,CAAE,IADG,CAEhBC,GAAG,CAAE,EAFW,CAGhBC,OAAO,CAAE,EAHO,CAAD,CAbL,SAmBdG,UAAU,CAAC,CACTL,WAAW,CAAEe,GAAG,CAACC,IAAJ,CAASK,aADb,CAETpB,GAAG,CAAE,EAFI,CAGTC,OAAO,CAAE,EAHA,CAAD,CAAV,CAnBc,6FA0BhB,aAAIe,QAAJ,CAAaD,IAAb,CAAkBE,GAAlB,EACEb,UAAU,gCACLL,WADK,MAERC,GAAG,CAAE,aAAIgB,QAAJ,CAAaD,IAAb,CAAkBE,GAFf,CAGRhB,OAAO,CAAE,EAHD,GADZ,CA1BgB,uEAAH,kBAAXiB,CAAAA,WAAW,2CAAjB,CAmCAA,WAAW,GACZ,CArCQ,CAqCN,CAACX,EAAD,CArCM,CAAT,CAuCA,GAAMe,CAAAA,mBAAmB,2FAAG,kBAAOC,CAAP,CAAUC,SAAV,CAAqBC,aAArB,sHAC1BF,CAAC,CAACG,cAAF,GAD0B,wCAIlB/B,CAAAA,KAAK,CAACwB,IAAN,CAAW,cAAX,CAA2B,CAC/BQ,MAAM,CAAEpB,EADuB,CAE/BiB,SAAS,CAAEA,SAFoB,CAG/BC,aAAa,CAAbA,aAH+B,CAA3B,CAJkB,QASxBG,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,eAAvB,CATwB,mFAWxB,aAAId,QAAJ,CAAaD,IAAb,CAAkBE,GAAlB,EACEb,UAAU,gCAAMD,OAAN,MAAeH,GAAG,CAAE,aAAIgB,QAAJ,CAAaD,IAAb,CAAkBE,GAAtC,CAA2ChB,OAAO,CAAE,EAApD,GADZ,CAXwB,sEAAH,kBAAnBqB,CAAAA,mBAAmB,qDAAzB,CAgBA,mBACE,aAAK,SAAS,CAAC,kBAAf,WACGtB,GAAG,EAAIH,OAAO,CAACG,GAAD,CADjB,CAEG,CAACD,WAAD,eACC,aAAK,SAAS,CAAC,aAAf,wBACE,kDADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,OAAT,8CAFF,GAHJ,CAQGA,WAAW,EACVA,WAAW,CAACgC,GAAZ,CAAgB,SAACC,IAAD,CAAU,CACxB,mBACE,aAAK,SAAS,CAAC,mBAAf,wBACE,YAAK,GAAG,CAAEA,IAAI,CAACC,KAAf,CAAsB,GAAG,CAAC,EAA1B,EADF,cAEE,mBAAID,IAAI,CAACE,IAAT,EAFF,cAGE,aAAK,SAAS,CAAC,SAAf,wBACE,eAAQ,SAAS,CAAC,MAAlB,uBACE,KAAC,IAAD,EAAM,EAAE,mBAAaF,IAAI,CAACxB,GAAlB,CAAR,uBACE,UAAG,SAAS,CAAC,aAAb,EADF,EADF,EADF,cAME,eACE,OAAO,CAAE,iBAACe,CAAD,QACPD,CAAAA,mBAAmB,CAACC,CAAD,CAAIS,IAAI,CAACxB,GAAT,CAAcwB,IAAI,CAACG,UAAnB,CADZ,EADX,CAIE,SAAS,CAAC,QAJZ,uBAME,UAAG,SAAS,CAAC,kBAAb,EANF,EANF,GAHF,GAAwCH,IAAI,CAACxB,GAA7C,CADF,CAqBD,CAtBD,CATJ,GADF,CAmCD,CAhHD,CAkHA,cAAeN,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ErrShow } from \"../notification/Notification\";\r\n\r\nconst initialState = {\r\n  productItem: [],\r\n  err: \"\",\r\n  success: \"\",\r\n};\r\n\r\nconst UserProduct = () => {\r\n  const [product, setProduct] = useState(initialState);\r\n  const [user, setUser] = useState({});\r\n\r\n  const { productItem, err } = product;\r\n\r\n  const id = user._id;\r\n\r\n  useEffect(() => {\r\n    const userData = async () => {\r\n      try {\r\n        const res = await axios.get(\"/user/profile\", {\r\n          headers: { \"auth-token\": localStorage.account },\r\n        });\r\n        setUser(res.data.user);\r\n      } catch (err) {\r\n        return err.response.data.msg;\r\n      }\r\n    };\r\n    userData();\r\n  }, [localStorage.account]);\r\n\r\n  useEffect(() => {\r\n    const userProduct = async () => {\r\n      try {\r\n        if (id) {\r\n          const res = await axios.post(\"/user/product\", { id });\r\n\r\n          if (!res)\r\n            return setProduct({\r\n              ...productItem,\r\n              err: \"Product of user does not already.\",\r\n              success: \"\",\r\n            });\r\n\r\n          if (res.data.productInPage.length === 0)\r\n            return setProduct({\r\n              productItem: null,\r\n              err: \"\",\r\n              success: \"\",\r\n            });\r\n\r\n          setProduct({\r\n            productItem: res.data.productInPage,\r\n            err: \"\",\r\n            success: \"\",\r\n          });\r\n        }\r\n      } catch (err) {\r\n        err.response.data.msg &&\r\n          setProduct({\r\n            ...productItem,\r\n            err: err.response.data.msg,\r\n            success: \"\",\r\n          });\r\n      }\r\n    };\r\n\r\n    userProduct();\r\n  }, [id]);\r\n\r\n  const handleDeleteProduct = async (e, idProduct, cloudinary_id) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await axios.post(\"/user/delete\", {\r\n        idUser: id,\r\n        idProduct: idProduct,\r\n        cloudinary_id,\r\n      });\r\n      window.location.href = \"/user/product\";\r\n    } catch (err) {\r\n      err.response.data.msg &&\r\n        setProduct({ ...product, err: err.response.data.msg, success: \"\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"box-user-product\">\r\n      {err && ErrShow(err)}\r\n      {!productItem && (\r\n        <div className=\"not-product\">\r\n          <p>You not yet upload product </p>\r\n          <Link to=\"/user\">Thêm sản phẩm ngay!</Link>\r\n        </div>\r\n      )}\r\n      {productItem &&\r\n        productItem.map((item) => {\r\n          return (\r\n            <div className=\"product-user-item\" key={item._id}>\r\n              <img src={item.image} alt=\"\" />\r\n              <p>{item.name}</p>\r\n              <div className=\"box-btn\">\r\n                <button className=\"edit\">\r\n                  <Link to={`product/${item._id}`}>\r\n                    <i className=\"fas fa-edit\"></i>\r\n                  </Link>\r\n                </button>\r\n                <button\r\n                  onClick={(e) =>\r\n                    handleDeleteProduct(e, item._id, item.cloudinary)\r\n                  }\r\n                  className=\"delete\"\r\n                >\r\n                  <i className=\"fas fa-trash-alt\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProduct;\r\n"]},"metadata":{},"sourceType":"module"}