{"ast":null,"code":"var _jsxFileName = \"E:\\\\MERN stack project\\\\fullStack\\\\client\\\\src\\\\auth\\\\form\\\\UserProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { ErrShow } from \"../notification/Notification\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  productItem: [],\n  err: \"\",\n  success: \"\"\n};\n\nconst UserProduct = () => {\n  _s();\n\n  const [product, setProduct] = useState(initialState);\n  const [user, setUser] = useState({});\n  const {\n    productItem,\n    err\n  } = product;\n  const id = user._id;\n  useEffect(() => {\n    const userData = async () => {\n      try {\n        const res = await axios.get(\"/user/profile\", {\n          headers: {\n            \"auth-token\": localStorage.account\n          }\n        });\n        setUser(res.data.user);\n      } catch (err) {\n        return err.response.data.msg;\n      }\n    };\n\n    userData();\n  }, [localStorage.account]);\n  useEffect(() => {\n    const userProduct = async () => {\n      try {\n        if (id) {\n          const res = await axios.post(\"/user/product\", {\n            id\n          });\n          if (!res) return setProduct({ ...productItem,\n            err: \"Product of user does not already.\",\n            success: \"\"\n          });\n          if (res.data.productInPage.length === 0) return setProduct({\n            productItem: null,\n            err: \"\",\n            success: \"\"\n          });\n          setProduct({\n            productItem: res.data.productInPage,\n            err: \"\",\n            success: \"\"\n          });\n        }\n      } catch (err) {\n        err.response.data.msg && setProduct({ ...productItem,\n          err: err.response.data.msg,\n          success: \"\"\n        });\n      }\n    };\n\n    userProduct();\n  }, [id]);\n\n  const handleDeleteProduct = async (e, idProduct, cloudinary_id) => {\n    e.preventDefault();\n\n    try {\n      await axios.post(\"/user/delete\", {\n        idUser: id,\n        idProduct: idProduct,\n        cloudinary_id\n      });\n      window.location.href = \"/user/product\";\n    } catch (err) {\n      err.response.data.msg && setProduct({ ...product,\n        err: err.response.data.msg,\n        success: \"\"\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"box-user-product\",\n    children: [err && ErrShow(err), !productItem && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"not-product\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"You not yet upload product \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/user\",\n        children: \"Th\\xEAm s\\u1EA3n ph\\u1EA9m ngay!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), productItem && productItem.map(item => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-user-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: item.image,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-btn\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"edit\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `product/${item._id}`,\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => handleDeleteProduct(e, item._id, item.cloudinary),\n            className: \"delete\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-trash-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this)]\n      }, item._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserProduct, \"OpdJULj3ZQWPdekfdbn+5P5R/CE=\");\n\n_c = UserProduct;\nexport default UserProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProduct\");","map":{"version":3,"sources":["E:/MERN stack project/fullStack/client/src/auth/form/UserProduct.js"],"names":["React","useEffect","useState","axios","Link","ErrShow","initialState","productItem","err","success","UserProduct","product","setProduct","user","setUser","id","_id","userData","res","get","headers","localStorage","account","data","response","msg","userProduct","post","productInPage","length","handleDeleteProduct","e","idProduct","cloudinary_id","preventDefault","idUser","window","location","href","map","item","image","name","cloudinary"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,OAAT,QAAwB,8BAAxB;;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,WAAW,EAAE,EADM;AAEnBC,EAAAA,GAAG,EAAE,EAFc;AAGnBC,EAAAA,OAAO,EAAE;AAHU,CAArB;;AAMA,MAAMC,WAAW,GAAG,MAAM;AAAA;;AACxB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAACI,YAAD,CAAtC;AACA,QAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,EAAD,CAAhC;AAEA,QAAM;AAAEK,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAAuBG,OAA7B;AAEA,QAAMI,EAAE,GAAGF,IAAI,CAACG,GAAhB;AAEAf,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,QAAQ,GAAG,YAAY;AAC3B,UAAI;AACF,cAAMC,GAAG,GAAG,MAAMf,KAAK,CAACgB,GAAN,CAAU,eAAV,EAA2B;AAC3CC,UAAAA,OAAO,EAAE;AAAE,0BAAcC,YAAY,CAACC;AAA7B;AADkC,SAA3B,CAAlB;AAGAR,QAAAA,OAAO,CAACI,GAAG,CAACK,IAAJ,CAASV,IAAV,CAAP;AACD,OALD,CAKE,OAAOL,GAAP,EAAY;AACZ,eAAOA,GAAG,CAACgB,QAAJ,CAAaD,IAAb,CAAkBE,GAAzB;AACD;AACF,KATD;;AAUAR,IAAAA,QAAQ;AACT,GAZQ,EAYN,CAACI,YAAY,CAACC,OAAd,CAZM,CAAT;AAcArB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMyB,WAAW,GAAG,YAAY;AAC9B,UAAI;AACF,YAAIX,EAAJ,EAAQ;AACN,gBAAMG,GAAG,GAAG,MAAMf,KAAK,CAACwB,IAAN,CAAW,eAAX,EAA4B;AAAEZ,YAAAA;AAAF,WAA5B,CAAlB;AAEA,cAAI,CAACG,GAAL,EACE,OAAON,UAAU,CAAC,EAChB,GAAGL,WADa;AAEhBC,YAAAA,GAAG,EAAE,mCAFW;AAGhBC,YAAAA,OAAO,EAAE;AAHO,WAAD,CAAjB;AAMF,cAAIS,GAAG,CAACK,IAAJ,CAASK,aAAT,CAAuBC,MAAvB,KAAkC,CAAtC,EACE,OAAOjB,UAAU,CAAC;AAChBL,YAAAA,WAAW,EAAE,IADG;AAEhBC,YAAAA,GAAG,EAAE,EAFW;AAGhBC,YAAAA,OAAO,EAAE;AAHO,WAAD,CAAjB;AAMFG,UAAAA,UAAU,CAAC;AACTL,YAAAA,WAAW,EAAEW,GAAG,CAACK,IAAJ,CAASK,aADb;AAETpB,YAAAA,GAAG,EAAE,EAFI;AAGTC,YAAAA,OAAO,EAAE;AAHA,WAAD,CAAV;AAKD;AACF,OAxBD,CAwBE,OAAOD,GAAP,EAAY;AACZA,QAAAA,GAAG,CAACgB,QAAJ,CAAaD,IAAb,CAAkBE,GAAlB,IACEb,UAAU,CAAC,EACT,GAAGL,WADM;AAETC,UAAAA,GAAG,EAAEA,GAAG,CAACgB,QAAJ,CAAaD,IAAb,CAAkBE,GAFd;AAGThB,UAAAA,OAAO,EAAE;AAHA,SAAD,CADZ;AAMD;AACF,KAjCD;;AAmCAiB,IAAAA,WAAW;AACZ,GArCQ,EAqCN,CAACX,EAAD,CArCM,CAAT;;AAuCA,QAAMe,mBAAmB,GAAG,OAAOC,CAAP,EAAUC,SAAV,EAAqBC,aAArB,KAAuC;AACjEF,IAAAA,CAAC,CAACG,cAAF;;AAEA,QAAI;AACF,YAAM/B,KAAK,CAACwB,IAAN,CAAW,cAAX,EAA2B;AAC/BQ,QAAAA,MAAM,EAAEpB,EADuB;AAE/BiB,QAAAA,SAAS,EAAEA,SAFoB;AAG/BC,QAAAA;AAH+B,OAA3B,CAAN;AAKAG,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,eAAvB;AACD,KAPD,CAOE,OAAO9B,GAAP,EAAY;AACZA,MAAAA,GAAG,CAACgB,QAAJ,CAAaD,IAAb,CAAkBE,GAAlB,IACEb,UAAU,CAAC,EAAE,GAAGD,OAAL;AAAcH,QAAAA,GAAG,EAAEA,GAAG,CAACgB,QAAJ,CAAaD,IAAb,CAAkBE,GAArC;AAA0ChB,QAAAA,OAAO,EAAE;AAAnD,OAAD,CADZ;AAED;AACF,GAdD;;AAgBA,sBACE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA,eACGD,GAAG,IAAIH,OAAO,CAACG,GAAD,CADjB,EAEG,CAACD,WAAD,iBACC;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,IAAD;AAAM,QAAA,EAAE,EAAC,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YAHJ,EAQGA,WAAW,IACVA,WAAW,CAACgC,GAAZ,CAAiBC,IAAD,IAAU;AACxB,0BACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,gCACE;AAAK,UAAA,GAAG,EAAEA,IAAI,CAACC,KAAf;AAAsB,UAAA,GAAG,EAAC;AAA1B;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA,oBAAID,IAAI,CAACE;AAAT;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA,kCACE;AAAQ,YAAA,SAAS,EAAC,MAAlB;AAAA,mCACE,QAAC,IAAD;AAAM,cAAA,EAAE,EAAG,WAAUF,IAAI,CAACxB,GAAI,EAA9B;AAAA,qCACE;AAAG,gBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAME;AACE,YAAA,OAAO,EAAGe,CAAD,IACPD,mBAAmB,CAACC,CAAD,EAAIS,IAAI,CAACxB,GAAT,EAAcwB,IAAI,CAACG,UAAnB,CAFvB;AAIE,YAAA,SAAS,EAAC,QAJZ;AAAA,mCAME;AAAG,cAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,kBANF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF;AAAA,SAAwCH,IAAI,CAACxB,GAA7C;AAAA;AAAA;AAAA;AAAA,cADF;AAqBD,KAtBD,CATJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAmCD,CAhHD;;GAAMN,W;;KAAAA,W;AAkHN,eAAeA,WAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ErrShow } from \"../notification/Notification\";\r\n\r\nconst initialState = {\r\n  productItem: [],\r\n  err: \"\",\r\n  success: \"\",\r\n};\r\n\r\nconst UserProduct = () => {\r\n  const [product, setProduct] = useState(initialState);\r\n  const [user, setUser] = useState({});\r\n\r\n  const { productItem, err } = product;\r\n\r\n  const id = user._id;\r\n\r\n  useEffect(() => {\r\n    const userData = async () => {\r\n      try {\r\n        const res = await axios.get(\"/user/profile\", {\r\n          headers: { \"auth-token\": localStorage.account },\r\n        });\r\n        setUser(res.data.user);\r\n      } catch (err) {\r\n        return err.response.data.msg;\r\n      }\r\n    };\r\n    userData();\r\n  }, [localStorage.account]);\r\n\r\n  useEffect(() => {\r\n    const userProduct = async () => {\r\n      try {\r\n        if (id) {\r\n          const res = await axios.post(\"/user/product\", { id });\r\n\r\n          if (!res)\r\n            return setProduct({\r\n              ...productItem,\r\n              err: \"Product of user does not already.\",\r\n              success: \"\",\r\n            });\r\n\r\n          if (res.data.productInPage.length === 0)\r\n            return setProduct({\r\n              productItem: null,\r\n              err: \"\",\r\n              success: \"\",\r\n            });\r\n\r\n          setProduct({\r\n            productItem: res.data.productInPage,\r\n            err: \"\",\r\n            success: \"\",\r\n          });\r\n        }\r\n      } catch (err) {\r\n        err.response.data.msg &&\r\n          setProduct({\r\n            ...productItem,\r\n            err: err.response.data.msg,\r\n            success: \"\",\r\n          });\r\n      }\r\n    };\r\n\r\n    userProduct();\r\n  }, [id]);\r\n\r\n  const handleDeleteProduct = async (e, idProduct, cloudinary_id) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await axios.post(\"/user/delete\", {\r\n        idUser: id,\r\n        idProduct: idProduct,\r\n        cloudinary_id,\r\n      });\r\n      window.location.href = \"/user/product\";\r\n    } catch (err) {\r\n      err.response.data.msg &&\r\n        setProduct({ ...product, err: err.response.data.msg, success: \"\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"box-user-product\">\r\n      {err && ErrShow(err)}\r\n      {!productItem && (\r\n        <div className=\"not-product\">\r\n          <p>You not yet upload product </p>\r\n          <Link to=\"/user\">Thêm sản phẩm ngay!</Link>\r\n        </div>\r\n      )}\r\n      {productItem &&\r\n        productItem.map((item) => {\r\n          return (\r\n            <div className=\"product-user-item\" key={item._id}>\r\n              <img src={item.image} alt=\"\" />\r\n              <p>{item.name}</p>\r\n              <div className=\"box-btn\">\r\n                <button className=\"edit\">\r\n                  <Link to={`product/${item._id}`}>\r\n                    <i className=\"fas fa-edit\"></i>\r\n                  </Link>\r\n                </button>\r\n                <button\r\n                  onClick={(e) =>\r\n                    handleDeleteProduct(e, item._id, item.cloudinary)\r\n                  }\r\n                  className=\"delete\"\r\n                >\r\n                  <i className=\"fas fa-trash-alt\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProduct;\r\n"]},"metadata":{},"sourceType":"module"}