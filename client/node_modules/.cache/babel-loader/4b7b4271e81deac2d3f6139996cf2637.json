{"ast":null,"code":"import _objectSpread from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import queryString from\"query-string\";import WOW from\"wowjs\";import Pagination from\"./components/Pagination\";import PostFiltersForm from\"./components/PostFiltersForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Commerce=function Commerce(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState({limit:18,page:1,totalPage:1}),_useState6=_slicedToArray(_useState5,2),pagination=_useState6[0],setPagination=_useState6[1];var _useState7=useState({page:1,limit:18}),_useState8=_slicedToArray(_useState7,2),filters=_useState8[0],setFilters=_useState8[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var paramsString,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;paramsString=queryString.stringify(filters);_context.next=5;return axios.get(\"/commerce?\".concat(paramsString));case 5:res=_context.sent;setProduct(res.data.result);setPagination(res.data.pagination);setLoading(false);new WOW.WOW().init();_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.log(_context.t0.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[filters]);var handlePageChange=function handlePageChange(newPage){setFilters(_objectSpread(_objectSpread({},filters),{},{page:newPage}));};var handleFiltersChange=function handleFiltersChange(newFilters){setFilters(_objectSpread(_objectSpread({},filters),{},{page:1,name:newFilters.search}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"box-commerce\",children:[/*#__PURE__*/_jsx(PostFiltersForm,{onSubmit:handleFiltersChange}),loading&&/*#__PURE__*/_jsx(\"h4\",{children:\"Loading...\"}),product.map(function(item){return/*#__PURE__*/_jsx(\"div\",{className:\"box-item\",\"data-wow-duration\":\"1.5s\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:item.name})]})},item._id);}),pagination.totalPage>1&&/*#__PURE__*/_jsx(Pagination,{pagination:pagination,onPageChange:handlePageChange})]});};export default Commerce;","map":{"version":3,"sources":["E:/MERN stack project/fullStack/client/src/components/boxcontent/components/commerce/Commerce.js"],"names":["React","useState","useEffect","axios","Link","queryString","WOW","Pagination","PostFiltersForm","Commerce","product","setProduct","loading","setLoading","limit","page","totalPage","pagination","setPagination","filters","setFilters","fetchData","paramsString","stringify","get","res","data","result","init","console","log","message","handlePageChange","newPage","handleFiltersChange","newFilters","name","search","map","item","image","_id"],"mappings":"gnBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CACA,MAAOC,CAAAA,GAAP,KAAgB,OAAhB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,eAAP,KAA4B,8BAA5B,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,cAA8BR,QAAQ,CAAC,EAAD,CAAtC,wCAAOS,OAAP,eAAgBC,UAAhB,eACA,eAA8BV,QAAQ,CAAC,KAAD,CAAtC,yCAAOW,OAAP,eAAgBC,UAAhB,eACA,eAAoCZ,QAAQ,CAAC,CAC3Ca,KAAK,CAAE,EADoC,CAE3CC,IAAI,CAAE,CAFqC,CAG3CC,SAAS,CAAE,CAHgC,CAAD,CAA5C,yCAAOC,UAAP,eAAmBC,aAAnB,eAMA,eAA8BjB,QAAQ,CAAC,CACrCc,IAAI,CAAE,CAD+B,CAErCD,KAAK,CAAE,EAF8B,CAAD,CAAtC,yCAAOK,OAAP,eAAgBC,UAAhB,eAKAlB,SAAS,CAAC,UAAM,CACd,GAAMmB,CAAAA,SAAS,0FAAG,wJAChBR,UAAU,CAAC,IAAD,CAAV,CADgB,gBAGRS,YAHQ,CAGOjB,WAAW,CAACkB,SAAZ,CAAsBJ,OAAtB,CAHP,uBAIIhB,CAAAA,KAAK,CAACqB,GAAN,qBAAuBF,YAAvB,EAJJ,QAIRG,GAJQ,eAKdd,UAAU,CAACc,GAAG,CAACC,IAAJ,CAASC,MAAV,CAAV,CACAT,aAAa,CAACO,GAAG,CAACC,IAAJ,CAAST,UAAV,CAAb,CACAJ,UAAU,CAAC,KAAD,CAAV,CACA,GAAIP,CAAAA,GAAG,CAACA,GAAR,GAAcsB,IAAd,GARc,iFAUdC,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB,EAVc,qEAAH,kBAATV,CAAAA,SAAS,0CAAf,CAcAA,SAAS,GACV,CAhBQ,CAgBN,CAACF,OAAD,CAhBM,CAAT,CAkBA,GAAMa,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,OAAD,CAAa,CACpCb,UAAU,gCAAMD,OAAN,MAAeJ,IAAI,CAAEkB,OAArB,GAAV,CACD,CAFD,CAIA,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,UAAD,CAAgB,CAC1Cf,UAAU,gCAAMD,OAAN,MAAeJ,IAAI,CAAE,CAArB,CAAwBqB,IAAI,CAAED,UAAU,CAACE,MAAzC,GAAV,CACD,CAFD,CAIA,mBACE,aAAK,SAAS,CAAC,cAAf,wBACE,KAAC,eAAD,EAAiB,QAAQ,CAAEH,mBAA3B,EADF,CAEGtB,OAAO,eAAI,kCAFd,CAGGF,OAAO,CAAC4B,GAAR,CAAY,SAACC,IAAD,CAAU,CACrB,mBACE,YAAoB,SAAS,CAAC,UAA9B,CAAyC,oBAAkB,MAA3D,uBACE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,YAAK,GAAG,CAAEA,IAAI,CAACC,KAAf,CAAsB,GAAG,CAAC,EAA1B,EADF,cAEE,mBAAID,IAAI,CAACH,IAAT,EAFF,GADF,EAAUG,IAAI,CAACE,GAAf,CADF,CAQD,CATA,CAHH,CAaGxB,UAAU,CAACD,SAAX,CAAuB,CAAvB,eACC,KAAC,UAAD,EAAY,UAAU,CAAEC,UAAxB,CAAoC,YAAY,CAAEe,gBAAlD,EAdJ,GADF,CAmBD,CA3DD,CA6DA,cAAevB,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport queryString from \"query-string\";\r\nimport WOW from \"wowjs\";\r\n\r\nimport Pagination from \"./components/Pagination\";\r\nimport PostFiltersForm from \"./components/PostFiltersForm\";\r\n\r\nconst Commerce = () => {\r\n  const [product, setProduct] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [pagination, setPagination] = useState({\r\n    limit: 18,\r\n    page: 1,\r\n    totalPage: 1,\r\n  });\r\n\r\n  const [filters, setFilters] = useState({\r\n    page: 1,\r\n    limit: 18,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const paramsString = queryString.stringify(filters);\r\n        const res = await axios.get(`/commerce?${paramsString}`);\r\n        setProduct(res.data.result);\r\n        setPagination(res.data.pagination);\r\n        setLoading(false);\r\n        new WOW.WOW().init();\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [filters]);\r\n\r\n  const handlePageChange = (newPage) => {\r\n    setFilters({ ...filters, page: newPage });\r\n  };\r\n\r\n  const handleFiltersChange = (newFilters) => {\r\n    setFilters({ ...filters, page: 1, name: newFilters.search });\r\n  };\r\n\r\n  return (\r\n    <div className=\"box-commerce\">\r\n      <PostFiltersForm onSubmit={handleFiltersChange} />\r\n      {loading && <h4>Loading...</h4>}\r\n      {product.map((item) => {\r\n        return (\r\n          <div key={item._id} className=\"box-item\" data-wow-duration=\"1.5s\">\r\n            <Link to=\"/\">\r\n              <img src={item.image} alt=\"\" />\r\n              <p>{item.name}</p>\r\n            </Link>\r\n          </div>\r\n        );\r\n      })}\r\n      {pagination.totalPage > 1 && (\r\n        <Pagination pagination={pagination} onPageChange={handlePageChange} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Commerce;\r\n"]},"metadata":{},"sourceType":"module"}