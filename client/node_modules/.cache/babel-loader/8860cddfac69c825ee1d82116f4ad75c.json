{"ast":null,"code":"import _regeneratorRuntime from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var link=[{name:\"Trang chủ\",contact:\"/\"},{name:\"Về chúng tôi\",contact:\"/introduce\"},{name:\"Thương mại & Dịch vụ\",contact:\"/commerce\"},{name:\"Thi công\",contact:\"/construction\"},{name:\"Tin tức\",contact:\"/news\"},{name:\"Liên hệ\",contact:\"/contact\"}];var Header=function Header(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var _useState5=useState(window.innerWidth),_useState6=_slicedToArray(_useState5,2),size=_useState6[0],setSize=_useState6[1];useEffect(function(){window.addEventListener(\"resize\",function(){setSize(window.innerWidth);});},[]);useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var access_token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/posts\",{headers:{\"auth-token\":localStorage.account}});case 3:access_token=_context.sent;if(access_token){_context.next=6;break;}return _context.abrupt(\"return\",setUser(\"\"));case 6:setUser(access_token.data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();if(localStorage.account){fetchData();}},[localStorage.account]);var logoutData=function logoutData(e){e.preventDefault();if(localStorage.account){localStorage.removeItem(\"account\");window.location.href=\"/\";//   try {\n//     await axios.get(\"user/logout\", {\n//       headers: { \"auth-token\": localStorage.account },\n//     });\n//     localStorage.removeItem(\"account\");\n//     window.location.href = \"/\";\n//   } catch (err) {\n//     console.log(err);\n//     // window.location.href = \"/\";\n//   }\n}else{window.location.href=\"/\";}};return/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"box-header\",children:[size<=1024&&/*#__PURE__*/_jsxs(\"div\",{className:\"menu-toggle\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://bhhome.vn/images/website/logo.png\",className:\"logo\",alt:\"\"})}),size<=1024&&!show&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bars toggle-menu\",onClick:function onClick(){return setShow(true);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"box-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hotline-btn\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"tel:0982964878\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone-alt\"})}),\"hotline: 0982 96 48 78\"]})}),/*#__PURE__*/_jsx(\"span\",{className:\"message\",children:\"When you step into your home, can hear sound of nature breathing\"})]})}),show&&/*#__PURE__*/_jsx(\"div\",{className:\"box-nava\",onClick:function onClick(){return setShow(false);},children:/*#__PURE__*/_jsx(\"div\",{className:\"nav-bar-container\",children:/*#__PURE__*/_jsxs(\"nav\",{children:[size<=1024&&show&&/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-times\",onClick:function onClick(){return setShow(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[localStorage.account&&/*#__PURE__*/_jsxs(\"div\",{className:\"box-user\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/user\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.avatar,alt:\"\"}),user.name]})}),/*#__PURE__*/_jsx(\"button\",{onClick:logoutData,children:\"Logout\"})]}),!localStorage.account&&/*#__PURE__*/_jsx(Link,{to:\"/user/login\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:link.map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:item.contact,children:item.name})},index);})})]})})}),size>1024&&/*#__PURE__*/_jsx(\"div\",{className:\"box-nav\",children:/*#__PURE__*/_jsx(\"div\",{className:\"nav-bar-container\",children:/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://bhhome.vn/images/website/logo.png\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[localStorage.account&&/*#__PURE__*/_jsxs(\"div\",{className:\"box-user\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/user\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.avatar,alt:\"\"}),user.name]})}),/*#__PURE__*/_jsx(\"button\",{onClick:logoutData,children:\"Logout\"})]}),!localStorage.account&&/*#__PURE__*/_jsx(Link,{to:\"/user/login\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:link.map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:item.contact,children:item.name})},index);})})]})})})]})});};export default Header;","map":{"version":3,"sources":["E:/MERN stack project/fullStack/client/src/components/header/Header.js"],"names":["axios","React","useState","useEffect","Link","useSelector","link","name","contact","Header","user","setUser","show","setShow","window","innerWidth","size","setSize","addEventListener","fetchData","get","headers","localStorage","account","access_token","data","console","log","logoutData","e","preventDefault","removeItem","location","href","avatar","map","item","index"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst link = [\r\n  { name: \"Trang chủ\", contact: \"/\" },\r\n  { name: \"Về chúng tôi\", contact: \"/introduce\" },\r\n  { name: \"Thương mại & Dịch vụ\", contact: \"/commerce\" },\r\n  { name: \"Thi công\", contact: \"/construction\" },\r\n  { name: \"Tin tức\", contact: \"/news\" },\r\n  { name: \"Liên hệ\", contact: \"/contact\" },\r\n];\r\n\r\nconst Header = () => {\r\n  const [user, setUser] = useState({});\r\n  const [show,setShow] = useState(false);\r\n  const [size,setSize] = useState(window.innerWidth);\r\n\r\nuseEffect(()=>{\r\n    window.addEventListener(\"resize\",()=>{\r\n        setSize(window.innerWidth)\r\n    })\r\n},[])\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const access_token = await axios.get(\"/posts\", {\r\n          headers: { \"auth-token\": localStorage.account },\r\n        });\r\n\r\n        if (!access_token) return setUser(\"\");\r\n\r\n        setUser(access_token.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    if (localStorage.account) {\r\n      fetchData();\r\n    }\r\n  }, [localStorage.account]);\r\n\r\n  const logoutData = (e) => {\r\n    e.preventDefault();\r\n    if (localStorage.account) {\r\n      localStorage.removeItem(\"account\");\r\n      window.location.href = \"/\";\r\n      //   try {\r\n      //     await axios.get(\"user/logout\", {\r\n      //       headers: { \"auth-token\": localStorage.account },\r\n      //     });\r\n      //     localStorage.removeItem(\"account\");\r\n      //     window.location.href = \"/\";\r\n      //   } catch (err) {\r\n      //     console.log(err);\r\n      //     // window.location.href = \"/\";\r\n      //   }\r\n    } else {\r\n      window.location.href = \"/\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section>\r\n      <div className=\"box-header\">\r\n      {size<=1024 && <div className=\"menu-toggle\">\r\n         <Link to=\"/\">\r\n                <img src=\"http://bhhome.vn/images/website/logo.png\" className=\"logo\" alt=\"\" />\r\n              </Link>\r\n          {size<=1024 && !show && <i className=\"fas fa-bars toggle-menu\" onClick={()=>setShow(true)}></i>}\r\n      </div>}\r\n      \r\n\r\n        <div className=\"box-container\">\r\n          <div className=\"container\">\r\n            <div className=\"hotline-btn\">\r\n              <a href=\"tel:0982964878\">\r\n                <span>\r\n                  <i className=\"fas fa-phone-alt\"></i>\r\n                </span>\r\n                hotline: 0982 96 48 78\r\n              </a>\r\n            </div>\r\n            <span className=\"message\">\r\n              When you step into your home, can hear sound of nature breathing\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {show&&<div className=\"box-nava\" onClick={()=>setShow(false)}>\r\n          <div className=\"nav-bar-container\">\r\n            <nav>\r\n             {size<=1024 && show &&<i class=\"fas fa-times\" onClick={()=>setShow(false)}></i>}\r\n              <div className=\"user\">\r\n                {localStorage.account && (\r\n                  <div className=\"box-user\">\r\n                    <span>\r\n                      <Link to=\"/user\">\r\n                        <img src={user.avatar} alt=\"\" />\r\n                        {user.name}\r\n                      </Link>\r\n                    </span>\r\n                    <button onClick={logoutData}>Logout</button>\r\n                  </div>\r\n                )}\r\n                {!localStorage.account && <Link to=\"/user/login\">Sign In</Link>}\r\n              </div>\r\n              <ul>\r\n                {link.map((item, index) => {\r\n                  return (\r\n                    <li key={index}>\r\n                      <Link to={item.contact}>{item.name}</Link>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            </nav>\r\n          </div>\r\n        </div>}\r\n        {size>1024&&<div className=\"box-nav\">\r\n          <div className=\"nav-bar-container\">\r\n            <nav>\r\n              <Link to=\"/\">\r\n                <img src=\"http://bhhome.vn/images/website/logo.png\" alt=\"\" />\r\n              </Link>\r\n              <div className=\"user\">\r\n                {localStorage.account && (\r\n                  <div className=\"box-user\">\r\n                    <span>\r\n                      <Link to=\"/user\">\r\n                        <img src={user.avatar} alt=\"\" />\r\n                        {user.name}\r\n                      </Link>\r\n                    </span>\r\n                    <button onClick={logoutData}>Logout</button>\r\n                  </div>\r\n                )}\r\n                {!localStorage.account && <Link to=\"/user/login\">Sign In</Link>}\r\n              </div>\r\n              <ul>\r\n                {link.map((item, index) => {\r\n                  return (\r\n                    <li key={index}>\r\n                      <Link to={item.contact}>{item.name}</Link>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            </nav>\r\n          </div>\r\n        </div>}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"]},"metadata":{},"sourceType":"module"}