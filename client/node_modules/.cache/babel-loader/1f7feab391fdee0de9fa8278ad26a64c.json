{"ast":null,"code":"import _defineProperty from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/MERN stack project/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,useParams}from\"react-router-dom\";import axios from\"axios\";import{ErrShow,SuccessShow}from\"../notification/Notification\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initialState={productItem:{},err:\"\",success:\"\"};var changeValue={species:\"\",nameProduct:\"\",errChange:\"\",successChange:\"\"};var Edit=function Edit(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(changeValue),_useState4=_slicedToArray(_useState3,2),change=_useState4[0],setChange=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),cloudinary=_useState8[0],setCloundinary=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var species=change.species,nameProduct=change.nameProduct,errChange=change.errChange,successChange=change.successChange;var productItem=product.productItem,err=product.err,success=product.success;useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!id){_context.next=9;break;}_context.next=4;return axios.post(\"/user/edit\",{id:id});case 4:res=_context.sent;console.log(res);if(res){_context.next=8;break;}return _context.abrupt(\"return\",setProduct(_objectSpread(_objectSpread({},productItem),{},{err:\"Sản phẩm không tồn tại.\",success:success})));case 8:setProduct({productItem:res.data.product[0],err:\"\",success:\"\"});case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);_context.t0.response.data.msg&&setProduct(_objectSpread(_objectSpread({},product),{},{err:_context.t0.response.data.msg,success:\"\"}));case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function getData(){return _ref.apply(this,arguments);};}();getData();},[id]);var handleChangeInput=function handleChangeInput(e){var _objectSpread2;var _e$target=e.target,name=_e$target.name,value=_e$target.value;setChange(_objectSpread(_objectSpread({},change),{},(_objectSpread2={},_defineProperty(_objectSpread2,name,value),_defineProperty(_objectSpread2,\"errChange\",\"\"),_defineProperty(_objectSpread2,\"successChange\",\"\"),_objectSpread2)));};var changeImageProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var file,formData,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;file=e.target.files[0];formData=new FormData();formData.append(\"image\",file);setLoading(true);_context2.next=8;return axios.post(\"/user/upload_product\",formData,{headers:{\"content-Type\":\"multipart/form-data\"}});case 8:res=_context2.sent;setImage(res.data.image);setCloundinary(res.data.cloudinary_id);setLoading(false);_context2.next=18;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](1);_context2.t0.response.data.msg&&setChange(_objectSpread(_objectSpread({},change),{},{errChange:_context2.t0.response.data.msg,successChange:\"\"}));console.log(_context2.t0);case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[1,14]]);}));return function changeImageProduct(_x){return _ref2.apply(this,arguments);};}();var handleUpdate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e,image){var oldCloudinary,_oldCloudinary;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();if(!(image!==productItem.image)){_context3.next=15;break;}_context3.prev=2;oldCloudinary=productItem.cloudinary;if(!id){_context3.next=8;break;}_context3.next=7;return axios.patch(\"/user/edit/\".concat(id),{nameProduct:nameProduct?nameProduct:productItem.name,species:species?species:productItem.species,cloudinaryNew:cloudinary?cloudinary:oldCloudinary,image:image,oldCloudinary:oldCloudinary});case 7:window.location.href=\"/user/product/\".concat(id);case 8:_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](2);_context3.t0.response.data.msg&&setChange(_objectSpread(_objectSpread({},change),{},{errChange:_context3.t0.response.data.msg,successChange:\"\"}));case 13:_context3.next=26;break;case 15:_context3.prev=15;_oldCloudinary=productItem.cloudinary;if(!id){_context3.next=21;break;}_context3.next=20;return axios.patch(\"/user/edit/\".concat(id),{nameProduct:nameProduct,species:species,cloudinaryNew:cloudinary?cloudinary:_oldCloudinary,image:image,oldCloudinary:_oldCloudinary});case 20:window.location.href=\"/user/product/\".concat(id);case 21:_context3.next=26;break;case 23:_context3.prev=23;_context3.t1=_context3[\"catch\"](15);_context3.t1.response.data.msg&&setChange(_objectSpread(_objectSpread({},change),{},{errChange:_context3.t1.response.data.msg,successChange:\"\"}));case 26:case\"end\":return _context3.stop();}}},_callee3,null,[[2,10],[15,23]]);}));return function handleUpdate(_x2,_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[err&&/*#__PURE__*/_jsxs(\"div\",{className:\"errProduct\",children:[/*#__PURE__*/_jsx(\"h1\",{children:err}),/*#__PURE__*/_jsx(Link,{to:\"\",children:\"Quay v\\u1EC1 trang ch\\u1EE7!\"})]}),!err&&/*#__PURE__*/_jsxs(\"div\",{className:\"box-edit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box-edit-item\",children:[loading&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin loadingEdit\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-camera\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",id:\"file_up\",onChange:changeImageProduct})]}),/*#__PURE__*/_jsx(\"img\",{src:image?image:productItem.image,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:productItem.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-upload\",children:[errChange&&ErrShow(errChange),/*#__PURE__*/_jsxs(\"div\",{className:\"form-edit-item\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"species\",children:\"Lo\\u1EA1i s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"input\",{id:\"species\",type:\"text\",name:\"species\",value:species,placeholder:\"Nh\\u1EADp lo\\u1EA1i s\\u1EA3n ph\\u1EA9m...\",onChange:handleChangeInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-edit-item\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"T\\xEAn s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",type:\"text\",name:\"nameProduct\",value:nameProduct,placeholder:\"Nh\\u1EADp t\\xEAn s\\u1EA3n ph\\u1EA9m...\",onChange:handleChangeInput})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){if(image){handleUpdate(e,image);}else{handleUpdate(e,productItem.image);}},children:\"Update!\"})]})]})]});};export default Edit;","map":{"version":3,"sources":["E:/MERN stack project/fullStack/client/src/auth/form/Edit.js"],"names":["React","useState","useEffect","Link","useParams","axios","ErrShow","SuccessShow","initialState","productItem","err","success","changeValue","species","nameProduct","errChange","successChange","Edit","id","product","setProduct","change","setChange","image","setImage","cloudinary","setCloundinary","loading","setLoading","getData","post","res","console","log","data","response","msg","handleChangeInput","e","target","name","value","changeImageProduct","preventDefault","file","files","formData","FormData","append","headers","cloudinary_id","handleUpdate","oldCloudinary","patch","cloudinaryNew","window","location","href"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { ErrShow, SuccessShow } from \"../notification/Notification\";\r\n\r\nconst initialState = {\r\n  productItem: {},\r\n  err: \"\",\r\n  success: \"\",\r\n};\r\n\r\nconst changeValue = {\r\n  species: \"\",\r\n  nameProduct: \"\",\r\n  errChange: \"\",\r\n  successChange: \"\",\r\n};\r\n\r\nconst Edit = () => {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState(initialState);\r\n  const [change, setChange] = useState(changeValue);\r\n  const [image, setImage] = useState(false);\r\n  const [cloudinary, setCloundinary] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { species, nameProduct, errChange, successChange } = change;\r\n\r\n  const { productItem, err, success } = product;\r\n\r\n  useEffect(() => {\r\n    const getData = async () => {\r\n      try {\r\n        if (id) {\r\n          const res = await axios.post(\"/user/edit\", { id });\r\n          console.log(res);\r\n          if (!res)\r\n            return setProduct({\r\n              ...productItem,\r\n              err: \"Sản phẩm không tồn tại.\",\r\n              success,\r\n            });\r\n\r\n          setProduct({\r\n            productItem: res.data.product[0],\r\n            err: \"\",\r\n            success: \"\",\r\n          });\r\n        }\r\n      } catch (err) {\r\n        err.response.data.msg &&\r\n          setProduct({ ...product, err: err.response.data.msg, success: \"\" });\r\n      }\r\n    };\r\n    getData();\r\n  }, [id]);\r\n\r\n  const handleChangeInput = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setChange({ ...change, [name]: value, errChange: \"\", successChange: \"\" });\r\n  };\r\n\r\n  const changeImageProduct = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const file = e.target.files[0];\r\n      let formData = new FormData();\r\n      formData.append(\"image\", file);\r\n      setLoading(true);\r\n\r\n      const res = await axios.post(`/user/upload_product`, formData, {\r\n        headers: {\r\n          \"content-Type\": \"multipart/form-data\",\r\n        },\r\n      });\r\n\r\n      setImage(res.data.image);\r\n      setCloundinary(res.data.cloudinary_id);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      err.response.data.msg &&\r\n        setChange({\r\n          ...change,\r\n          errChange: err.response.data.msg,\r\n          successChange: \"\",\r\n        });\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = async (e, image) => {\r\n    e.preventDefault();\r\n\r\n    if (image !== productItem.image) {\r\n      try {\r\n        const oldCloudinary = productItem.cloudinary;\r\n\r\n        if (id) {\r\n          await axios.patch(`/user/edit/${id}`, {\r\n            nameProduct: nameProduct ? nameProduct : productItem.name,\r\n            species: species ? species : productItem.species,\r\n            cloudinaryNew: cloudinary ? cloudinary : oldCloudinary,\r\n            image,\r\n            oldCloudinary,\r\n          });\r\n\r\n          window.location.href = `/user/product/${id}`;\r\n        }\r\n      } catch (err) {\r\n        err.response.data.msg &&\r\n          setChange({\r\n            ...change,\r\n            errChange: err.response.data.msg,\r\n            successChange: \"\",\r\n          });\r\n      }\r\n    } else {\r\n      try {\r\n        const oldCloudinary = productItem.cloudinary;\r\n\r\n        if (id) {\r\n          await axios.patch(`/user/edit/${id}`, {\r\n            nameProduct,\r\n            species,\r\n            cloudinaryNew: cloudinary ? cloudinary : oldCloudinary,\r\n            image,\r\n            oldCloudinary,\r\n          });\r\n\r\n          window.location.href = `/user/product/${id}`;\r\n        }\r\n      } catch (err) {\r\n        err.response.data.msg &&\r\n          setChange({\r\n            ...change,\r\n            errChange: err.response.data.msg,\r\n            successChange: \"\",\r\n          });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {err && (\r\n        <div className=\"errProduct\">\r\n          <h1>{err}</h1>\r\n          <Link to=\"\">Quay về trang chủ!</Link>\r\n        </div>\r\n      )}\r\n      {!err && (\r\n        <div className=\"box-edit\">\r\n          <div className=\"box-edit-item\">\r\n            {loading && <i className=\"fas fa-spinner fa-spin loadingEdit\"></i>}\r\n            <span>\r\n              <i className=\"fas fa-camera\"></i>\r\n              <input\r\n                type=\"file\"\r\n                name=\"image\"\r\n                id=\"file_up\"\r\n                onChange={changeImageProduct}\r\n              />\r\n            </span>\r\n            <img src={image ? image : productItem.image} alt=\"\" />\r\n            <p>{productItem.name}</p>\r\n          </div>\r\n          <div className=\"form-upload\">\r\n            {errChange && ErrShow(errChange)}\r\n            <div className=\"form-edit-item\">\r\n              <label htmlFor=\"species\">Loại sản phẩm</label>\r\n              <input\r\n                id=\"species\"\r\n                type=\"text\"\r\n                name=\"species\"\r\n                value={species}\r\n                placeholder=\"Nhập loại sản phẩm...\"\r\n                onChange={handleChangeInput}\r\n              />\r\n            </div>\r\n            <div className=\"form-edit-item\">\r\n              <label htmlFor=\"name\">Tên sản phẩm</label>\r\n              <input\r\n                id=\"name\"\r\n                type=\"text\"\r\n                name=\"nameProduct\"\r\n                value={nameProduct}\r\n                placeholder=\"Nhập tên sản phẩm...\"\r\n                onChange={handleChangeInput}\r\n              />\r\n            </div>\r\n            <button\r\n              onClick={(e) => {\r\n                if (image) {\r\n                  handleUpdate(e, image);\r\n                } else {\r\n                  handleUpdate(e, productItem.image);\r\n                }\r\n              }}\r\n            >\r\n              Update!\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Edit;\r\n"]},"metadata":{},"sourceType":"module"}